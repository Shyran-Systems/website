{% load app_filters %}
{% load static %}
<div class="row">
        <div class="col-xs-1 col-sm-1">{{ pipe.local_id }}</div>
        <div class="col-xs-11 col-sm-11 input">
                <script>
                      var form_id = {{'form'|strcat:pipe.id|js}};
                      var pipe_id = {{pipe.id|js}};
                      var host = '{{pipe.request.component.host}}';
                      var base_path = '{{pipe.request.component.base_path}}';
                      var request_path = '{{pipe.request.path}}';
                      request_path = request_path.slice(1);

                      var rest_url = '{% url 'rest:request' %}';
                      request_url = host+base_path+request_path;
                      input_url = '{% url 'pipeline:input' %}';
                      output_url = '{% url 'pipeline:output' %}';
               </script>

            <div class="request-name">
                {{ pipe.request.component.name}}/{{pipe.request.name}}
            </div>

            <form id="form{{pipe.id}}" onsubmit="" data-parsley-validate="">
                    {% csrf_token %}
                <div class="input_fields">
                    {% for param in pipe.parameters %}
                        {% include 'pipeline/params/param.html' %}
                    {% endfor %}
                </div>
                <input type='hidden' name="pipe_id" value="{{ pipe.id }}" />
                <script>
                        run_form(form_id, pipe_id, rest_url, request_url, input_url, output_url)
                </script>
                <button class="btn btn-outline-secondary" name="run" type="submit" value="run">run</button>
            </form>
        </div>
</div>

{% if pipe.run_time != None %}
    <div class="time-run">Run at: {{ pipe.run_time }}</div>
{% endif %}